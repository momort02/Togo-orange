<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Magasin | NationGlory Togo</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header class="hero">
  <h1>ğŸ›’ Magasin NationGlory Togo</h1>
  <p>Commande de ressources in-game</p>
  <a href="index.html" class="btn-primary">Retour au site</a>
</header>

<!-- ===== NAV avec BURGER ===== -->
<nav class="navbar">
  <div class="burger-menu" id="burgerMenu">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <div class="nav-links" id="navLinks">
    <a href="index.html#presentation">PrÃ©sentation</a>
    <a href="index.html#objectifs">Objectifs</a>
    <a href="index.html#recrutement">Recrutement</a>
    <a href="magasin.html">ğŸ›’ Magasin</a>
    <a href="index.html#contact">Contact</a>
  </div>
</nav>

<section class="section">
  <h2>Commander des ressources</h2>
  <p>Remplis le formulaire pour passer commande.</p>

  <form
    id="shopForm"
    class="recruit-form"
    method="POST"
  >

    <label>Nom en jeu</label>
    <input type="text" id="name" name="Nom en jeu" required>

    <label>Ressource</label>
    <select id="resource" name="Ressource" required>
      <option value="">-- Choisir --</option>
      <option>Argent</option>
      <option>Nourriture</option>
      <option>MatÃ©riaux</option>
      <option>Armes</option>
      <option>Autre</option>
    </select>

    <label>QuantitÃ©</label>
    <input type="number" id="quantity" name="QuantitÃ©" required>

    <label>Moyen de paiement</label>
    <select id="payment" name="Paiement">
      <option>In-game</option>
      <option>Accord interne</option>
    </select>

    <label>Informations supplÃ©mentaires</label>
    <textarea id="details" name="DÃ©tails"></textarea>

    <button type="submit">Passer la commande</button>
  </form>

  <p id="status"></p>
</section>

<footer>
  <p>Â© 2026 NationGlory Togo â€“ Serveur Orange</p>
</footer>

<script>
  // Menu Burger Toggle
  const burgerMenu = document.getElementById('burgerMenu');
  const navLinks = document.getElementById('navLinks');

  burgerMenu.addEventListener('click', () => {
    navLinks.classList.toggle('active');
    burgerMenu.classList.toggle('active');
  });

  // Fermer le menu au clic sur un lien
  document.querySelectorAll('.nav-links a').forEach(link => {
    link.addEventListener('click', () => {
      navLinks.classList.remove('active');
      burgerMenu.classList.remove('active');
    });
  });

  // Webhook Discord
  const webhookURL = "https://discord.com/api/webhooks/1462009675410178178/Ysid18mRBe0mwqsIgQgECdoCqT-0WQhNM1_nANejy8IGMkrSjSZaunIvEcoPl7aRauTP";

  document.getElementById("shopForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const name = document.getElementById("name").value;
    const resource = document.getElementById("resource").value;
    const quantity = document.getElementById("quantity").value;
    const payment = document.getElementById("payment").value;
    const details = document.getElementById("details").value;

    const statusElement = document.getElementById("status");
    statusElement.textContent = "â³ Envoi en cours...";
    statusElement.style.color = "orange";

    const payload = {
      embeds: [{
        title: "ğŸ›’ Nouvelle commande",
        color: 8388736,
        fields: [
          { name: "Joueur", value: name, inline: true },
          { name: "Ressource", value: resource, inline: true },
          { name: "QuantitÃ©", value: quantity, inline: true },
          { name: "Paiement", value: payment },
          { name: "DÃ©tails", value: details || "Aucun" }
        ],
        footer: { text: "Magasin NationGlory Togo" },
        timestamp: new Date()
      }]
    };

    fetch(webhookURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    })
    .then(response => {
      if (response.ok) {
        statusElement.textContent = "âœ… Commande envoyÃ©e avec succÃ¨s !";
        statusElement.style.color = "green";
        document.getElementById("shopForm").reset();
      } else {
        statusElement.textContent = "âŒ Erreur lors de l'envoi";
        statusElement.style.color = "red";
      }
    })
    .catch(err => {
      console.error(err);
      statusElement.textContent = "âŒ ProblÃ¨me de connexion";
      statusElement.style.color = "red";
    });
  });
</script>

</body>
</html>